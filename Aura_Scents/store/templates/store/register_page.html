{% extends 'store/base.html' %}
{% load static %}
{% load form_tags %}
{% load socialaccount %}

{% block title %}Register | Aura Scents{% endblock %}

{% block content %}
<section class="min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8">
    <div class="max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-lg">
        <div class="text-center">
            <h2 class="text-3xl font-playfair font-bold text-purple-800">Create your account</h2>
        </div>

        <input type="text" tabindex="-1" style="position:absolute;opacity:0;height:0;width:0;" aria-hidden="true">

        <form class="mt-8 space-y-6" action="{% url 'register_page' %}" method="POST">
            {% csrf_token %}
            {{ form.non_field_errors }}

            {% with "appearance-none rounded-md block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm" as input_class %}

            <div class="rounded-md shadow-sm space-y-4">
                <!-- Username -->
                <div>
                    <label for="id_username" class="block text-sm font-medium text-gray-700">Username</label>
                    {{ form.username|add_class:input_class }}
                    {% if form.username.errors %}
                    <p class="text-red-500 text-sm mt-1">{{ form.username.errors.0 }}</p>
                    {% endif %}
                </div>

                <!-- Email -->
                <div>
                    <label for="id_email" class="block text-sm font-medium text-gray-700">Email Address</label>
                    {{ form.email|add_class:input_class }}
                    {% if form.email.errors %}
                    <p class="text-red-500 text-sm mt-1">{{ form.email.errors.0 }}</p>
                    {% endif %}
                </div>

                <!-- Referral Code -->
                <div>
                    <label for="id_referral_code" class="block text-sm font-medium text-gray-700">Referral Code (Optional)</label>
                    {{ form.referral_code|add_class:input_class }}
                    {% if form.referral_code.errors %}
                    <p class="text-red-500 text-sm mt-1">{{ form.referral_code.errors.0 }}</p>
                    {% endif %}
                </div>

                <!-- Password -->
                <div>
                    <label for="id_password1" class="block text-sm font-medium text-gray-700">Password</label>
                    {{ form.password1|add_class:input_class }}
                    {% if form.password1.errors %}
                    <p class="text-red-500 text-sm mt-1">{{ form.password1.errors.0 }}</p>
                    {% endif %}
                </div>

                <!-- Confirm Password -->
                <div>
                    <label for="id_password2" class="block text-sm font-medium text-gray-700">Confirm Password</label>
                    {{ form.password2|add_class:input_class }}
                    {% if form.password2.errors %}
                    <p class="text-red-500 text-sm mt-1">{{ form.password2.errors.0 }}</p>
                    {% endif %}
                </div>
            </div>

            {% endwith %}

            <div>
                <button type="submit"
                        class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-semibold rounded-md bg-pink-500 hover:bg-pink-600 text-white">
                    Sign Up
                </button>
            </div>
        </form>

        <div class="relative text-center text-sm text-gray-500">
            <span class="bg-white px-2">Or</span>
        </div>

        <div>
            <a href="{% provider_login_url 'google' %}"
               class="w-full flex items-center justify-center border border-gray-300 rounded-md py-2 px-4 text-sm font-medium text-gray-700 bg-white hover:bg-gray-100">
                <img class="h-5 w-5 mr-2" src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google logo">
                Sign up with Google
            </a>
        </div>

        <p class="mt-6 text-center text-sm text-gray-600">
            Already have an account?
            <a href="{% url 'login_page' %}" class="font-medium text-purple-700 hover:text-purple-500">Sign In</a>
        </p>
    </div>
</section>
{% endblock %}